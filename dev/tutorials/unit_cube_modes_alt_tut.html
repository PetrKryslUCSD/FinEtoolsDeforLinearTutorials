<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Vibration of a cube of nearly incompressible material: alternative models · FinEtoolsDeforLinearTutorials.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">FinEtoolsDeforLinearTutorials.jl</span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><a class="tocitem" href="tutorials.html">Tutorials</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="unit_cube_modes_alt_tut.html">Vibration of a cube of nearly incompressible material: alternative models</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="unit_cube_modes_alt_tut.html">Vibration of a cube of nearly incompressible material: alternative models</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PetrKryslUCSD/FinEtoolsDeforLinearTutorials.jl/blob/master/docs/src/tutorials/unit_cube_modes_alt_tut.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Vibration-of-a-cube-of-nearly-incompressible-material:-alternative-models"><a class="docs-heading-anchor" href="#Vibration-of-a-cube-of-nearly-incompressible-material:-alternative-models">Vibration of a cube of nearly incompressible material: alternative models</a><a id="Vibration-of-a-cube-of-nearly-incompressible-material:-alternative-models-1"></a><a class="docs-heading-anchor-permalink" href="#Vibration-of-a-cube-of-nearly-incompressible-material:-alternative-models" title="Permalink"></a></h1><h2 id="Description"><a class="docs-heading-anchor" href="#Description">Description</a><a id="Description-1"></a><a class="docs-heading-anchor-permalink" href="#Description" title="Permalink"></a></h2><p>Compute the free-vibration spectrum of a unit cube of nearly incompressible isotropic material, E = 1, ν = 0.499, and ρ = 1 (refer to [1]).</p><p>The solution with the serendipity quadratic hexahedron is supplemented with solutions obtained with advanced finite elements: nodal-integration energy stabilized hexahedra and tetrahedra, and mean-strain hexahedra and tetrahedra.</p><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><p>[1] Puso MA, Solberg J (2006) A stabilized nodally integrated tetrahedral. International Journal for Numerical Methods in Engineering 67: 841-867. [2] P. Krysl, Mean-strain 8-node hexahedron with optimized energy-sampling stabilization, Finite Elements in Analysis and Design 108 (2016) 41–53.</p><p><img src="unit_cube-mode7.png" alt/></p><h2 id="Goals"><a class="docs-heading-anchor" href="#Goals">Goals</a><a id="Goals-1"></a><a class="docs-heading-anchor-permalink" href="#Goals" title="Permalink"></a></h2><ul><li>Set up a simulation loop that will run all the models and collect data.</li><li>Present the computed spectrum curves.</li></ul><pre><code class="language-julia">#</code></pre><h2 id="Definitions"><a class="docs-heading-anchor" href="#Definitions">Definitions</a><a id="Definitions-1"></a><a class="docs-heading-anchor-permalink" href="#Definitions" title="Permalink"></a></h2><p>This is the finite element toolkit itself.</p><pre><code class="language-julia">using FinEtools</code></pre><p>The linear stress analysis application is implemented in this package.</p><pre><code class="language-julia">using FinEtoolsDeforLinear</code></pre><p>Convenience import.</p><pre><code class="language-julia">using FinEtools.MeshExportModule</code></pre><p>The eigenvalue problem is solved with the Lanczos algorithm from this package.</p><pre><code class="language-julia">using Arpack

using SymRCM</code></pre><p>The material properties and dimensions are defined with physical units.</p><pre><code class="language-julia">E = 1*phun(&quot;PA&quot;);
nu = 0.499;
rho = 1*phun(&quot;KG/M^3&quot;);
a = 1*phun(&quot;M&quot;); # length of the side of the cube
N = 8
neigvs = 20 # how many eigenvalues
OmegaShift = (0.01*2*pi)^2; # The frequency with which to shift</code></pre><p>The model is fully three-dimensional, and hence the material model  and the FEMM created below need to refer to an appropriate model-reduction scheme.</p><pre><code class="language-julia">MR = DeforModelRed3D
material = MatDeforElastIso(MR, rho, E, nu, 0.0);</code></pre><pre><code class="language-julia">models = [
    (&quot;H20&quot;, H20block, GaussRule(3,2), FEMMDeforLinear, 1),
    (&quot;ESNICEH8&quot;, H8block, NodalTensorProductRule(3), FEMMDeforLinearESNICEH8, 2),
    (&quot;ESNICET4&quot;, T4block, NodalSimplexRule(3), FEMMDeforLinearESNICET4, 2),
    (&quot;MSH8&quot;, H8block, NodalTensorProductRule(3), FEMMDeforLinearMSH8, 2),
    (&quot;MST10&quot;, T10block, TetRule(4), FEMMDeforLinearMST10, 1),
]</code></pre><p>Run  the simulation loop over all the models.</p><pre><code class="language-julia">sigdig(n) = round(n * 10000) / 10000
results = let
    results = []
    for m in models
        fens, fes  = m[2](a, a, a, m[5]*N, m[5]*N, m[5]*N);
        @show count(fens)
        geom = NodalField(fens.xyz)
        u = NodalField(zeros(size(fens.xyz,1),3))
        numbering = let
            C = connectionmatrix(FEMMBase(IntegDomain(fes, m[3])), count(fens))
            numbering = symrcm(C)
        end
        numberdofs!(u, numbering);
        println(&quot;nfreedofs = $(u.nfreedofs)&quot;)

        femm = m[4](MR, IntegDomain(fes, m[3]), material);
        femm = associategeometry!(femm, geom)
        K = stiffness(femm, geom, u)
        M = mass(femm, geom, u);

        evals, evecs, nconv = eigs(K+OmegaShift*M, M; nev=neigvs, which=:SM)
        @show nconv == neigvs
        evals = evals .- OmegaShift;
        fs = real(sqrt.(complex(evals)))/(2*pi)
        println(&quot;$(m[1]) eigenvalues: $(sigdig.(fs)) [Hz]&quot;)
        push!(results, (m, fs))
    end
    results # return it
end

#</code></pre><h2 id="Present-the-results-graphically"><a class="docs-heading-anchor" href="#Present-the-results-graphically">Present the results graphically</a><a id="Present-the-results-graphically-1"></a><a class="docs-heading-anchor-permalink" href="#Present-the-results-graphically" title="Permalink"></a></h2><pre><code class="language-julia">using Gnuplot


@gp  &quot;set terminal windows 0 &quot;  :-
for r in results
    @gp  :- collect(1:length(r[2])) vec(r[2]) &quot; lw 2 with lp title &#39;$(r[1][1])&#39; &quot;  :-
end
@gp  :- &quot;set xlabel &#39;Mode number [ND]&#39;&quot; :-
@gp  :- &quot;set ylabel &#39;Frequency [Hz]&#39;&quot;</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 31 August 2020 01:22">Monday 31 August 2020</span>. Using Julia version 1.5.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
